{% extends "layout.html" %}
{% block body %}
{% from "major_filter.html" import render_major %}
<script src="//cdn.bootcss.com/paginationjs/2.0.8/pagination.min.js"></script>
<link href="//cdn.bootcss.com/paginationjs/2.0.8/pagination.css" rel="stylesheet">
<script src="//cdn.bootcss.com/jquery.form/4.2.1/jquery.form.min.js"></script>
<script src="{{url_for('uni_major_page.static', filename='js/college.js')}}"></script>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="col-md-10 col-md-offset-1">
    <div class="pagetitle">
        <h1>提交学校专业信息</h1>
    </div>
    <div id="main">
        <form method="post" action="{{ url_for('research_page.submitted_research') }}" id="research">
            <input type="hidden" name="id">
            <label for="college_name">学校:</label>
            <input id="college_name" name="college_name" list="collegeNameList" class="form-control"/>
            <datalist id="collegeNameList"></datalist>
            <label for="major">专业:</label>
            {{ render_major() }}
            <hr>
            <label for="directory_url">教授目录主页</label>
            <input type="url" name="directory_url" class="form-control">
            <label for="professor_url">请提供第一个有个人主页的学者的链接</label>
            <input type="url" name="professor_url" class="form-control">

            <p>示例</p>
            <div>伊利诺伊理工学院IIT计算机系教授目录页:
                <span>
                <a href="http://science.iit.edu/computer-science/people/faculty">
                    http://science.iit.edu/computer-science/people/faculty
                </a>
                </span>
            </div>
            <div>第一位有个人主页的学者（Eunice Santos, Ph.D.）的主页链接:
                <span>
                <a href="http://science.iit.edu/people/faculty/eunice-santos">
                    http://science.iit.edu/people/faculty/eunice-santos
                </a>
                </span>
            </div>
            <hr>    
            <div id="crawlResult">
            </div>
            <div id="pagination-container"></div>
            </div>
            <input id="approveIt" name="approve" type="hidden" value="0">
            <hr>
            <div class="form-group">
                <label for="verification_code">验证码
                    <a href="javascript:void(0)">
                        <img id="vericode" onclick="refresh(this)" src="/verifycode" title="点击重新获取" />
                    </a>
                </label>
                <input id="verification_code" name="verification_code" type="text" value="">
                {% if veri.errors %}
                <ul class=errors>
                    {% for error in veri.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div> 
            <button class="btn btn-info" type="submit" id="researchSubmit">提交</button>
        </form>
    </div>
</div>
</div>
</div>
<script>
var wait = 60;
function refresh(obj) {
    obj.setAttribute('src','/verifycode?random='+Math.random());
}
</script>
<script>
$(document).ready(function(){
    $.ajax({
        method: "get",
        url : '/static/data/college.json',
        contentType: 'application/json',
        dataType: "json",
        success : function (result){
            collegeList = result.sort(compare('name', true, false));
        }
    });

    $("#research").submit(function() {
        return submitRedirect(this, "research", "{{url_for('research_page.research_index')}}");
    });
});
</script>
{% endblock %}
